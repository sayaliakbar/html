<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Exercise 4: Accessing User Location</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }
      h1 {
        color: #2c3e50;
      }
      .container {
        border: 1px solid #ddd;
        padding: 15px;
        margin: 15px 0;
        border-radius: 5px;
      }
      #map {
        width: 100%;
        height: 400px;
        border: 1px solid #ddd;
        margin: 15px 0;
      }
      .task {
        background-color: #f8f9fa;
        border-left: 4px solid #4caf50;
        padding: 10px 15px;
        margin-bottom: 20px;
      }
      .tip {
        background-color: #e3f2fd;
        border-left: 4px solid #2196f3;
        padding: 10px 15px;
        margin-bottom: 20px;
      }
      .warning {
        background-color: #fff3e0;
        border-left: 4px solid #ff9800;
        padding: 10px 15px;
        margin-bottom: 20px;
      }
      button {
        padding: 8px 15px;
        background-color: #4caf50;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        margin: 5px 0;
      }
      button:hover {
        background-color: #388e3c;
      }
      code {
        background-color: #f5f5f5;
        padding: 2px 4px;
        border-radius: 4px;
      }
      .location-info {
        background-color: #f9f9f9;
        padding: 10px;
        border-radius: 4px;
        margin: 10px 0;
      }
    </style>
  </head>
  <body>
    <h1>Exercise 4: Accessing User Location</h1>

    <div class="warning">
      <h3>Important Note:</h3>
      <p>
        This exercise requires location permissions in your browser. You'll see
        permission requests when running the code. For security reasons,
        geolocation typically only works on secure origins (HTTPS or localhost).
      </p>
    </div>

    <div class="task">
      <h2>Task 1: Basic Geolocation</h2>
      <p>
        Implement a button that gets and displays the user's current position:
      </p>

      <div class="container">
        <button id="get-location">Get My Location</button>
        <div class="location-info" id="location-display">
          <p>Your location will appear here.</p>
        </div>
      </div>

      <p>Complete the JavaScript function:</p>
      <pre><code>// Get references to DOM elements
const getLocationBtn = document.getElementById('get-location');
const locationDisplay = document.getElementById('location-display');

// Function to get current position
function getPosition() {
  // Your code here
  // 1. Check if geolocation is supported
  // 2. Request the current position
  // 3. Handle success: display the latitude and longitude
  // 4. Handle errors: display appropriate error messages
}

// Add click event listener
getLocationBtn.addEventListener('click', getPosition);</code></pre>
    </div>

    <div class="task">
      <h2>Task 2: Position Options</h2>
      <p>
        Extend the basic geolocation to include additional position options and
        display more information:
      </p>

      <div class="container">
        <div>
          <label>
            <input type="checkbox" id="high-accuracy" /> Enable High Accuracy
          </label>
        </div>
        <div>
          <label
            >Timeout (ms):
            <input
              type="number"
              id="timeout"
              value="5000"
              min="1000"
              step="1000"
            />
          </label>
        </div>
        <div>
          <label
            >Maximum Age (ms):
            <input type="number" id="max-age" value="0" min="0" step="1000" />
          </label>
        </div>
        <button id="get-detailed-location">Get Detailed Location</button>
        <div class="location-info" id="detailed-location-display">
          <p>Your detailed location will appear here.</p>
        </div>
      </div>

      <p>Complete the JavaScript function:</p>
      <pre><code>// Get references to DOM elements
const highAccuracyCheckbox = document.getElementById('high-accuracy');
const timeoutInput = document.getElementById('timeout');
const maxAgeInput = document.getElementById('max-age');
const getDetailedLocationBtn = document.getElementById('get-detailed-location');
const detailedLocationDisplay = document.getElementById('detailed-location-display');

// Function to get detailed position with options
function getDetailedPosition() {
  // Your code here
  // 1. Create the options object from the input values
  // 2. Request the current position with these options
  // 3. Handle success: display latitude, longitude, accuracy, altitude (if available),
  //    heading (if available), and speed (if available)
  // 4. Handle errors: display appropriate error messages
}

// Add click event listener
getDetailedLocationBtn.addEventListener('click', getDetailedPosition);</code></pre>
    </div>

    <div class="task">
      <h2>Task 3: Continuous Location Tracking</h2>
      <p>Implement location tracking that updates as the user moves:</p>

      <div class="container">
        <button id="start-tracking">Start Tracking</button>
        <button id="stop-tracking" disabled>Stop Tracking</button>
        <div class="location-info" id="tracking-display">
          <p>Tracking information will appear here.</p>
        </div>
      </div>

      <p>Complete the JavaScript function:</p>
      <pre><code>// Get references to DOM elements
const startTrackingBtn = document.getElementById('start-tracking');
const stopTrackingBtn = document.getElementById('stop-tracking');
const trackingDisplay = document.getElementById('tracking-display');

// Variable to store the watch ID
let watchId = null;

// Function to start location tracking
function startTracking() {
  // Your code here
  // 1. Implement watchPosition and store the returned ID
  // 2. Update the tracking display with each new position
  // 3. Handle errors appropriately
  // 4. Update the button states
}

// Function to stop location tracking
function stopTracking() {
  // Your code here
  // 1. Clear the watch using the stored ID
  // 2. Update the tracking display
  // 3. Update the button states
}

// Add click event listeners
startTrackingBtn.addEventListener('click', startTracking);
stopTrackingBtn.addEventListener('click', stopTracking);</code></pre>
    </div>

    <div class="task">
      <h2>Task 4: Calculate Distance</h2>
      <p>
        Create a function that calculates the distance between two sets of
        coordinates:
      </p>

      <div class="container">
        <h3>Distance Calculator</h3>
        <div>
          <h4>Point A:</h4>
          <div>
            <label
              >Latitude:
              <input type="number" id="lat-a" value="40.7128" step="0.0001" />
            </label>
          </div>
          <div>
            <label
              >Longitude:
              <input type="number" id="lon-a" value="-74.0060" step="0.0001" />
            </label>
          </div>
        </div>
        <div>
          <h4>Point B:</h4>
          <div>
            <label
              >Latitude:
              <input type="number" id="lat-b" value="34.0522" step="0.0001" />
            </label>
          </div>
          <div>
            <label
              >Longitude:
              <input type="number" id="lon-b" value="-118.2437" step="0.0001" />
            </label>
          </div>
        </div>
        <div>
          <button id="calculate-distance">Calculate Distance</button>
        </div>
        <div class="location-info" id="distance-display">
          <p>The distance will appear here.</p>
        </div>
      </div>

      <p>Complete the JavaScript function:</p>
      <pre><code>// Get references to DOM elements
const latAInput = document.getElementById('lat-a');
const lonAInput = document.getElementById('lon-a');
const latBInput = document.getElementById('lat-b');
const lonBInput = document.getElementById('lon-b');
const calculateDistanceBtn = document.getElementById('calculate-distance');
const distanceDisplay = document.getElementById('distance-display');

// Haversine formula to calculate distance between two points
function calculateHaversineDistance(lat1, lon1, lat2, lon2) {
  // Your code here
  // Implement the Haversine formula:
  // 1. Convert latitude and longitude from degrees to radians
  // 2. Calculate differences
  // 3. Apply the formula
  // 4. Convert to kilometers or miles
}

// Function to handle the distance calculation
function handleDistanceCalculation() {
  // Your code here
  // 1. Get the input values
  // 2. Call the Haversine function
  // 3. Display the result
}

// Add click event listener
calculateDistanceBtn.addEventListener('click', handleDistanceCalculation);</code></pre>
    </div>

    <div class="tip">
      <h3>Tips:</h3>
      <ul>
        <li>
          Always provide clear feedback to users about their location
          permissions status.
        </li>
        <li>
          Remember that geolocation might not work in all environments, so
          always include error handling.
        </li>
        <li>
          The Haversine formula calculates the great-circle distance between two
          points on a sphere.
        </li>
        <li>
          For continuous tracking, be mindful of battery usage on mobile
          devices.
        </li>
        <li>
          When displaying coordinates, consider limiting the decimal places to
          make them more readable.
        </li>
      </ul>
    </div>

    <p>
      When you've completed the exercises, test them on different devices and
      locations to verify they work correctly.
    </p>
  </body>
</html>
